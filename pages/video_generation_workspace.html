<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Generation Workspace - YouTube Shorts Generator</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fyoutubesh2879back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.5"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 bg-surface border-b border-border shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-primary-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-text-primary">Shorts Generator</h1>
                        <p class="text-xs text-text-secondary">Create viral content</p>
                    </div>
                </div>

                <!-- Navigation & User Menu -->
                <div class="flex items-center space-x-4">
                    <!-- Desktop Navigation -->
                    <nav class="hidden md:flex items-center space-x-6">
                        <a href="dashboard_home.html" class="text-text-secondary hover:text-text-primary transition-colors">Dashboard</a>
                        <a href="video_generation_workspace.html" class="text-primary font-medium border-b-2 border-primary pb-1">Generate</a>
                        <a href="video_library_management.html" class="text-text-secondary hover:text-text-primary transition-colors">Library</a>
                        <a href="niche_research_trends.html" class="text-text-secondary hover:text-text-primary transition-colors">Trends</a>
                    </nav>

                    <!-- User Avatar & Settings -->
                    <div class="flex items-center space-x-3">
                        <button class="p-2 text-text-secondary hover:text-text-primary transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-12h0z"/>
                            </svg>
                        </button>
                        <a href="account_settings_preferences.html" class="w-8 h-8 bg-gradient-to-br from-accent to-accent-600 rounded-full flex items-center justify-center text-white text-sm font-medium hover:scale-105 transition-transform">
                            JD
                        </a>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden p-2 text-text-secondary hover:text-text-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-surface border-t border-border">
            <div class="px-4 py-3 space-y-3">
                <a href="dashboard_home.html" class="block text-text-secondary">Dashboard</a>
                <a href="video_generation_workspace.html" class="block text-primary font-medium">Generate Videos</a>
                <a href="video_library_management.html" class="block text-text-secondary">Video Library</a>
                <a href="niche_research_trends.html" class="block text-text-secondary">Trends & Research</a>
                <a href="account_settings_preferences.html" class="block text-text-secondary">Account Settings</a>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <nav class="flex items-center space-x-2 text-sm">
            <a href="dashboard_home.html" class="text-text-secondary hover:text-text-primary transition-colors">Dashboard</a>
            <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <span class="text-text-secondary">Generate Videos</span>
            <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <span class="text-text-primary font-medium" id="selected-niche">Horror Stories</span>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Main Generation Area -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Progress Steps -->
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-text-primary">Video Generation Progress</h2>
                        <button id="cancel-btn" class="text-error hover:text-error-600 text-sm font-medium transition-colors">
                            Cancel Generation
                        </button>
                    </div>

                    <!-- Step Indicator -->
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center space-x-4">
                            <div id="step-1" class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium">
                                    1
                                </div>
                                <span class="text-sm font-medium text-primary">Research</span>
                            </div>
                            <div class="w-8 h-0.5 bg-secondary-200" id="line-1"></div>
                            <div id="step-2" class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-secondary-200 text-text-secondary rounded-full flex items-center justify-center text-sm font-medium">
                                    2
                                </div>
                                <span class="text-sm text-text-secondary">Content</span>
                            </div>
                            <div class="w-8 h-0.5 bg-secondary-200" id="line-2"></div>
                            <div id="step-3" class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-secondary-200 text-text-secondary rounded-full flex items-center justify-center text-sm font-medium">
                                    3
                                </div>
                                <span class="text-sm text-text-secondary">Assembly</span>
                            </div>
                            <div class="w-8 h-0.5 bg-secondary-200" id="line-3"></div>
                            <div id="step-4" class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-secondary-200 text-text-secondary rounded-full flex items-center justify-center text-sm font-medium">
                                    4
                                </div>
                                <span class="text-sm text-text-secondary">Rendering</span>
                            </div>
                        </div>
                    </div>

                    <!-- Overall Progress Bar -->
                    <div class="mb-6">
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-text-primary font-medium">Overall Progress</span>
                            <span class="text-text-secondary" id="progress-percentage">15%</span>
                        </div>
                        <div class="w-full bg-secondary-100 rounded-full h-3">
                            <div id="progress-bar" class="bg-gradient-to-r from-primary to-accent h-3 rounded-full transition-all duration-500" style="width: 15%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-text-secondary mt-2">
                            <span>Estimated time remaining: <span id="time-remaining">2 min 30 sec</span></span>
                            <span>Generating 5 videos</span>
                        </div>
                    </div>
                </div>

                <!-- Dynamic Status Updates -->
                <div class="card p-6">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary to-primary-600 rounded-lg flex items-center justify-center">
                            <svg id="status-icon" class="w-6 h-6 text-white animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-text-primary" id="status-title">Researching Trending Topics</h3>
                            <p class="text-text-secondary" id="status-description">Analyzing viral horror story trends and keywords...</p>
                        </div>
                    </div>

                    <!-- Research Phase Content -->
                    <div id="research-content" class="space-y-4">
                        <div class="bg-primary-50 rounded-lg p-4 border border-primary-100">
                            <h4 class="text-sm font-medium text-text-primary mb-3">Trending Keywords Found:</h4>
                            <div class="flex flex-wrap gap-2" id="trending-keywords">
                                <span class="px-3 py-1 bg-primary text-white text-sm rounded-full animate-pulse">haunted house</span>
                                <span class="px-3 py-1 bg-primary text-white text-sm rounded-full animate-pulse animation-delay-75">urban legends</span>
                                <span class="px-3 py-1 bg-primary text-white text-sm rounded-full animate-pulse animation-delay-150">scary stories</span>
                                <span class="px-3 py-1 bg-primary text-white text-sm rounded-full animate-pulse">ghost encounters</span>
                                <span class="px-3 py-1 bg-primary text-white text-sm rounded-full animate-pulse animation-delay-75">creepy pasta</span>
                            </div>
                        </div>
                    </div>

                    <!-- Content Gathering Phase (Hidden initially) -->
                    <div id="content-gathering" class="hidden space-y-4">
                        <div class="bg-accent-50 rounded-lg p-4 border border-accent-100">
                            <h4 class="text-sm font-medium text-text-primary mb-3">Gathering Visual Content:</h4>
                            <div class="grid grid-cols-4 gap-3">
                                <div class="aspect-square bg-secondary-100 rounded-lg overflow-hidden shimmer">
                                    <img src="https://images.unsplash.com/photo-1520637836862-4d197d17c35a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Horror image 1" class="w-full h-full object-cover opacity-0 transition-opacity duration-500" onload="this.style.opacity='1'" onerror="this.src='https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                </div>
                                <div class="aspect-square bg-secondary-100 rounded-lg overflow-hidden shimmer">
                                    <img src="https://images.pixabay.com/photo/2017/10/31/19/05/web-2904878_1280.jpg" alt="Horror image 2" class="w-full h-full object-cover opacity-0 transition-opacity duration-500" onload="this.style.opacity='1'" onerror="this.src='https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                </div>
                                <div class="aspect-square bg-secondary-100 rounded-lg overflow-hidden shimmer">
                                    <img src="https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Horror image 3" class="w-full h-full object-cover opacity-0 transition-opacity duration-500" onload="this.style.opacity='1'" onerror="this.src='https://images.pixabay.com/photo/2017/10/31/19/05/web-2904878_1280.jpg'; this.onerror=null;" />
                                </div>
                                <div class="aspect-square bg-secondary-100 rounded-lg overflow-hidden shimmer">
                                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Horror image 4" class="w-full h-full object-cover opacity-0 transition-opacity duration-500" onload="this.style.opacity='1'" onerror="this.src='https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Assembly Phase (Hidden initially) -->
                    <div id="assembly-phase" class="hidden space-y-4">
                        <div class="bg-warning-50 rounded-lg p-4 border border-warning-100">
                            <h4 class="text-sm font-medium text-text-primary mb-3">Assembling Videos:</h4>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-16 h-9 bg-secondary-800 rounded overflow-hidden relative">
                                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"></div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-text-primary">Video 1: "The Haunted Mirror"</p>
                                        <div class="w-full bg-secondary-100 rounded-full h-1.5 mt-1">
                                            <div class="bg-warning h-1.5 rounded-full transition-all duration-300" style="width: 75%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-16 h-9 bg-secondary-800 rounded overflow-hidden relative">
                                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse animation-delay-75"></div>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-text-primary">Video 2: "Midnight Footsteps"</p>
                                        <div class="w-full bg-secondary-100 rounded-full h-1.5 mt-1">
                                            <div class="bg-warning h-1.5 rounded-full transition-all duration-300" style="width: 45%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Rendering Phase (Hidden initially) -->
                    <div id="rendering-phase" class="hidden space-y-4">
                        <div class="bg-success-50 rounded-lg p-4 border border-success-100">
                            <h4 class="text-sm font-medium text-text-primary mb-3">Final Rendering:</h4>
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-success rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-text-primary">Optimizing for YouTube Shorts format...</p>
                                    <p class="text-xs text-text-secondary">Adding captions, thumbnails, and final touches</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generated Videos Preview (Hidden initially) -->
                <div id="generated-videos" class="hidden card p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-success to-success-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-text-primary">Videos Generated Successfully! 🎉</h3>
                                <p class="text-text-secondary">5 unique horror story shorts ready for upload</p>
                            </div>
                        </div>
                        <button id="batch-download" class="btn-primary">
                            <span class="flex items-center space-x-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                <span>Download All</span>
                            </span>
                        </button>
                    </div>

                    <!-- Video Grid -->
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                        <!-- Video 1 -->
                        <div class="group">
                            <div class="relative aspect-[9/16] bg-secondary-800 rounded-lg overflow-hidden mb-3">
                                <!-- Enhanced Video Element with Controls -->
                                <video class="w-full h-full object-cover workspace-video" poster="https://images.unsplash.com/photo-1520637836862-4d197d17c35a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" preload="metadata" muted data-video-id="workspace-1" data-title="The Haunted Mirror" data-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4" />
                                    <img src="https://images.unsplash.com/photo-1520637836862-4d197d17c35a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="The Haunted Mirror thumbnail" class="w-full h-full object-cover" onerror="this.src='https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'; this.onerror=null;" />
                                </video>
                                
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer workspace-video-overlay">
                                    <button class="w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all play-video-btn">
                                        <svg class="w-6 h-6 text-text-primary ml-1" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Video Status Indicator -->
                                <div class="absolute top-2 right-2">
                                    <span class="px-2 py-1 bg-success text-white text-xs rounded-full">Ready</span>
                                </div>
                                <div class="absolute bottom-2 left-2">
                                    <span class="px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded">0:45</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-text-primary line-clamp-2">The Haunted Mirror</p>
                                <button class="workspace-download-btn w-full btn-secondary text-xs py-1" data-video-id="workspace-1" data-title="The Haunted Mirror" data-url="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <span class="flex items-center justify-center space-x-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        <span>Download</span>
                                    </span>
                                </button>
                            </div>
                        </div>

                        <!-- Video 2 -->
                        <div class="group">
                            <div class="relative aspect-[9/16] bg-secondary-800 rounded-lg overflow-hidden mb-3">
                                <video class="w-full h-full object-cover workspace-video" poster="https://images.pixabay.com/photo/2017/10/31/19/05/web-2904878_1280.jpg" preload="metadata" muted data-video-id="workspace-2" data-title="Midnight Footsteps" data-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4" />
                                    <img src="https://images.pixabay.com/photo/2017/10/31/19/05/web-2904878_1280.jpg" alt="Midnight Footsteps thumbnail" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                </video>
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer workspace-video-overlay">
                                    <button class="w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all play-video-btn">
                                        <svg class="w-6 h-6 text-text-primary ml-1" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="absolute top-2 right-2">
                                    <span class="px-2 py-1 bg-success text-white text-xs rounded-full">Ready</span>
                                </div>
                                <div class="absolute bottom-2 left-2">
                                    <span class="px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded">0:52</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-text-primary line-clamp-2">Midnight Footsteps</p>
                                <button class="workspace-download-btn w-full btn-secondary text-xs py-1" data-video-id="workspace-2" data-title="Midnight Footsteps" data-url="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <span class="flex items-center justify-center space-x-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        <span>Download</span>
                                    </span>
                                </button>
                            </div>
                        </div>

                        <!-- Video 3 -->
                        <div class="group">
                            <div class="relative aspect-[9/16] bg-secondary-800 rounded-lg overflow-hidden mb-3">
                                <video class="w-full h-full object-cover workspace-video" poster="https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" preload="metadata" muted data-video-id="workspace-3" data-title="The Whispering Woods" data-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4" />
                                    <img src="https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="The Whispering Woods thumbnail" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1520637836862-4d197d17c35a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                </video>
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer workspace-video-overlay">
                                    <button class="w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all play-video-btn">
                                        <svg class="w-6 h-6 text-text-primary ml-1" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="absolute top-2 right-2">
                                    <span class="px-2 py-1 bg-success text-white text-xs rounded-full">Ready</span>
                                </div>
                                <div class="absolute bottom-2 left-2">
                                    <span class="px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded">0:38</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-text-primary line-clamp-2">The Whispering Woods</p>
                                <button class="workspace-download-btn w-full btn-secondary text-xs py-1" data-video-id="workspace-3" data-title="The Whispering Woods" data-url="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <span class="flex items-center justify-center space-x-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        <span>Download</span>
                                    </span>
                                </button>
                            </div>
                        </div>

                        <!-- Video 4 -->
                        <div class="group">
                            <div class="relative aspect-[9/16] bg-secondary-800 rounded-lg overflow-hidden mb-3">
                                <video class="w-full h-full object-cover workspace-video" poster="https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" preload="metadata" muted data-video-id="workspace-4" data-title="Elevator to Nowhere" data-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4" />
                                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Elevator to Nowhere thumbnail" class="w-full h-full object-cover" onerror="this.src='https://images.pixabay.com/photo/2017/10/31/19/05/web-2904878_1280.jpg'; this.onerror=null;" />
                                </video>
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer workspace-video-overlay">
                                    <button class="w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all play-video-btn">
                                        <svg class="w-6 h-6 text-text-primary ml-1" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="absolute top-2 right-2">
                                    <span class="px-2 py-1 bg-success text-white text-xs rounded-full">Ready</span>
                                </div>
                                <div class="absolute bottom-2 left-2">
                                    <span class="px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded">0:41</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-text-primary line-clamp-2">Elevator to Nowhere</p>
                                <button class="workspace-download-btn w-full btn-secondary text-xs py-1" data-video-id="workspace-4" data-title="Elevator to Nowhere" data-url="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <span class="flex items-center justify-center space-x-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        <span>Download</span>
                                    </span>
                                </button>
                            </div>
                        </div>

                        <!-- Video 5 -->
                        <div class="group">
                            <div class="relative aspect-[9/16] bg-secondary-800 rounded-lg overflow-hidden mb-3">
                                <video class="w-full h-full object-cover workspace-video" poster="https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" preload="metadata" muted data-video-id="workspace-5" data-title="The Last Message" data-src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4" />
                                    <img src="https://images.pexels.com/photos/1666065/pexels-photo-1666065.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="The Last Message thumbnail" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1520637836862-4d197d17c35a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                </video>
                                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer workspace-video-overlay">
                                    <button class="w-12 h-12 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all play-video-btn">
                                        <svg class="w-6 h-6 text-text-primary ml-1" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="absolute top-2 right-2">
                                    <span class="px-2 py-1 bg-success text-white text-xs rounded-full">Ready</span>
                                </div>
                                <div class="absolute bottom-2 left-2">
                                    <span class="px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded">0:56</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-text-primary line-clamp-2">The Last Message</p>
                                <button class="workspace-download-btn w-full btn-secondary text-xs py-1" data-video-id="workspace-5" data-title="The Last Message" data-url="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4">
                                    <span class="flex items-center justify-center space-x-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        <span>Download</span>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Hashtag Suggestions -->
                    <div class="bg-accent-50 rounded-lg p-4 border border-accent-100">
                        <h4 class="text-sm font-medium text-text-primary mb-3">🔥 Trending Hashtags for Your Videos:</h4>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#HorrorStories</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#ScaryTales</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#YouTubeShorts</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#CreepyPasta</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#HauntedStories</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#GhostStories</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#Viral</span>
                            <span class="px-3 py-1 bg-accent text-white text-sm rounded-full">#Trending</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customization Sidebar -->
            <div class="lg:col-span-1">
                <div class="sticky top-24 space-y-6">
                    <!-- Customization Panel -->
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-text-primary mb-4">Customization</h3>
                        
                        <!-- Video Duration -->
                        <div class="space-y-3 mb-6">
                            <label class="block text-sm font-medium text-text-primary">Video Duration</label>
                            <div class="space-y-2">
                                <input type="range" id="duration-slider" min="15" max="60" value="45" class="w-full h-2 bg-secondary-200 rounded-lg appearance-none cursor-pointer" />
                                <div class="flex justify-between text-xs text-text-secondary">
                                    <span>15s</span>
                                    <span id="duration-value" class="font-medium text-text-primary">45s</span>
                                    <span>60s</span>
                                </div>
                            </div>
                        </div>

                        <!-- Quality Options -->
                        <div class="space-y-3 mb-6">
                            <label class="block text-sm font-medium text-text-primary">Video Quality</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3">
                                    <input type="radio" name="quality" value="720p" class="text-primary focus:ring-accent" />
                                    <span class="text-sm text-text-primary">720p (Recommended)</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="radio" name="quality" value="1080p" checked class="text-primary focus:ring-accent" />
                                    <span class="text-sm text-text-primary">1080p (High Quality)</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="radio" name="quality" value="4k" class="text-primary focus:ring-accent" />
                                    <span class="text-sm text-text-primary">4K (Premium)</span>
                                </label>
                            </div>
                        </div>

                        <!-- Text Overlay Options -->
                        <div class="space-y-3 mb-6">
                            <label class="block text-sm font-medium text-text-primary">Text Overlay</label>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" checked class="text-primary focus:ring-accent rounded" />
                                    <span class="text-sm text-text-primary">Auto-generated captions</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" checked class="text-primary focus:ring-accent rounded" />
                                    <span class="text-sm text-text-primary">Title overlay</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="text-primary focus:ring-accent rounded" />
                                    <span class="text-sm text-text-primary">Watermark</span>
                                </label>
                            </div>
                        </div>

                        <!-- Audio Options -->
                        <div class="space-y-3">
                            <label class="block text-sm font-medium text-text-primary">Background Audio</label>
                            <select class="input-field text-sm">
                                <option>Suspenseful Horror</option>
                                <option>Dark Ambient</option>
                                <option>Eerie Whispers</option>
                                <option>No Audio</option>
                            </select>
                        </div>
                    </div>

                    <!-- Generation Stats -->
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-text-primary mb-4">Generation Stats</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between">
                                <span class="text-sm text-text-secondary">Videos to Generate</span>
                                <span class="text-sm font-medium text-text-primary">5</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-text-secondary">Estimated Size</span>
                                <span class="text-sm font-medium text-text-primary">~125 MB</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-text-secondary">Format</span>
                                <span class="text-sm font-medium text-text-primary">MP4 (9:16)</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-text-secondary">API Calls Used</span>
                                <span class="text-sm font-medium text-text-primary">23/5000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-text-primary mb-4">Quick Actions</h3>
                        <div class="space-y-3">
                            <a href="video_library_management.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-secondary-50 transition-colors">
                                <div class="w-8 h-8 bg-accent-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-4 h-4 text-accent-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 002 2v6a2 2 0 00-2 2H5a2 2 0 00-2 2v-6a2 2 0 002-2m14 0V9a2 2 0 00-2-2M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                                    </svg>
                                </div>
                                <span class="text-sm font-medium text-text-primary">View Library</span>
                            </a>
                            <a href="niche_research_trends.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-secondary-50 transition-colors">
                                <div class="w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-4 h-4 text-warning-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                </div>
                                <span class="text-sm font-medium text-text-primary">Research Trends</span>
                            </a>
                            <a href="dashboard_home.html" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-secondary-50 transition-colors">
                                <div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                                    </svg>
                                </div>
                                <span class="text-sm font-medium text-text-primary">Back to Dashboard</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile Customization Bottom Sheet (Hidden by default) -->
    <div id="mobile-customization" class="lg:hidden fixed inset-x-0 bottom-0 bg-surface border-t border-border rounded-t-xl shadow-lg transform translate-y-full transition-transform duration-300 z-40">
        <div class="p-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-text-primary">Customization</h3>
                <button id="close-mobile-customization" class="p-2 text-text-secondary hover:text-text-primary">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile customization content (same as sidebar) -->
            <div class="space-y-4 max-h-96 overflow-y-auto">
                <!-- Duration -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Duration: <span id="mobile-duration-value">45s</span></label>
                    <input type="range" id="mobile-duration-slider" min="15" max="60" value="45" class="w-full h-2 bg-secondary-200 rounded-lg appearance-none cursor-pointer" />
                </div>
                
                <!-- Quality -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Quality</label>
                    <select class="input-field text-sm">
                        <option>720p (Recommended)</option>
                        <option selected>1080p (High Quality)</option>
                        <option>4K (Premium)</option>
                    </select>
                </div>
                
                <!-- Text Overlay -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Text Options</label>
                    <div class="space-y-2">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" checked class="text-primary focus:ring-accent rounded" />
                            <span class="text-sm text-text-primary">Auto captions</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" checked class="text-primary focus:ring-accent rounded" />
                            <span class="text-sm text-text-primary">Title overlay</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancel Confirmation Modal -->
    <div id="cancel-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-surface rounded-lg p-6 max-w-md mx-4">
            <div class="flex items-center space-x-3 mb-4">
                <div class="w-10 h-10 bg-error-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-error" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                    </svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-text-primary">Cancel Generation?</h3>
                    <p class="text-text-secondary text-sm">This will stop the current video generation process.</p>
                </div>
            </div>
            <div class="flex space-x-3">
                <button id="confirm-cancel" class="flex-1 bg-error text-white px-4 py-2 rounded font-medium hover:bg-error-600 transition-colors">
                    Yes, Cancel
                </button>
                <button id="continue-generation" class="flex-1 btn-secondary">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });

        // Duration slider functionality
        const durationSlider = document.getElementById('duration-slider');
        const durationValue = document.getElementById('duration-value');
        const mobileDurationSlider = document.getElementById('mobile-duration-slider');
        const mobileDurationValue = document.getElementById('mobile-duration-value');

        function updateDuration(value) {
            durationValue.textContent = value + 's';
            mobileDurationValue.textContent = value + 's';
        }

        durationSlider.addEventListener('input', function() {
            updateDuration(this.value);
            mobileDurationSlider.value = this.value;
        });

        mobileDurationSlider.addEventListener('input', function() {
            updateDuration(this.value);
            durationSlider.value = this.value;
        });

        // Mobile customization panel
        const mobileCustomization = document.getElementById('mobile-customization');
        const closeMobileCustomization = document.getElementById('close-mobile-customization');

        // Show mobile customization on smaller screens during generation
        if (window.innerWidth < 1024) {
            setTimeout(() => {
                mobileCustomization.classList.remove('translate-y-full');
            }, 3000);
        }

        closeMobileCustomization.addEventListener('click', function() {
            mobileCustomization.classList.add('translate-y-full');
        });

        // Cancel generation modal
        const cancelBtn = document.getElementById('cancel-btn');
        const cancelModal = document.getElementById('cancel-modal');
        const confirmCancel = document.getElementById('confirm-cancel');
        const continueGeneration = document.getElementById('continue-generation');

        cancelBtn.addEventListener('click', function() {
            cancelModal.classList.remove('hidden');
        });

        confirmCancel.addEventListener('click', function() {
            window.location.href = 'dashboard_home.html';
        });

        continueGeneration.addEventListener('click', function() {
            cancelModal.classList.add('hidden');
        });

        // Enhanced workspace video functionality
        class WorkspaceVideoManager {
            constructor() {
                this.currentVideo = null;
                this.setupVideoHandlers();
            }

            setupVideoHandlers() {
                // Video overlay click handlers
                document.querySelectorAll('.workspace-video-overlay').forEach(overlay => {
                    overlay.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const video = overlay.previousElementSibling;
                        this.playVideo(video);
                    });
                });

                // Video click handlers for direct play
                document.querySelectorAll('.workspace-video').forEach(video => {
                    video.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.playVideo(video);
                    });

                    // Handle video ended
                    video.addEventListener('ended', () => {
                        this.resetVideo(video);
                    });
                });
            }

            playVideo(video) {
                // Pause any currently playing video
                if (this.currentVideo && this.currentVideo !== video) {
                    this.pauseVideo(this.currentVideo);
                }

                // Load video source if not already loaded
                if (!video.src && video.dataset.src) {
                    video.src = video.dataset.src;
                }

                video.play().then(() => {
                    this.currentVideo = video;
                    this.showVideoControls(video);
                }).catch(err => {
                    console.error('Error playing video:', err);
                });
            }

            pauseVideo(video) {
                video.pause();
                this.hideVideoControls(video);
                if (this.currentVideo === video) {
                    this.currentVideo = null;
                }
            }

            resetVideo(video) {
                video.currentTime = 0;
                this.hideVideoControls(video);
                this.currentVideo = null;
            }

            showVideoControls(video) {
                const overlay = video.nextElementSibling;
                overlay.style.opacity = '0';
                
                // Add custom controls if needed
                video.setAttribute('controls', 'true');
            }

            hideVideoControls(video) {
                const overlay = video.nextElementSibling;
                overlay.style.opacity = '';
                
                video.removeAttribute('controls');
            }
        }

        // Enhanced workspace download functionality
        class WorkspaceDownloadManager {
            constructor() {
                this.setupDownloadHandlers();
            }

            setupDownloadHandlers() {
                // Individual download buttons
                document.querySelectorAll('.workspace-download-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.downloadVideo(btn);
                    });
                });

                // Batch download button
                document.getElementById('batch-download')?.addEventListener('click', () => {
                    this.batchDownload();
                });
            }

            async downloadVideo(btn) {
                const videoId = btn.dataset.videoId;
                const title = btn.dataset.title;
                const url = btn.dataset.url;
                
                const originalContent = btn.innerHTML;
                
                // Show loading state
                btn.innerHTML = `
                    <span class="flex items-center justify-center space-x-1">
                        <svg class="animate-spin w-3 h-3" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span>Downloading...</span>
                    </span>
                `;
                btn.disabled = true;

                try {
                    // Simulate download preparation
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // Create and trigger download
                    this.triggerDownload(title, url);
                    
                    // Show success state
                    btn.innerHTML = `
                        <span class="flex items-center justify-center space-x-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            <span>Downloaded!</span>
                        </span>
                    `;
                    
                    // Reset button after 2 seconds
                    setTimeout(() => {
                        btn.innerHTML = originalContent;
                        btn.disabled = false;
                    }, 2000);
                    
                } catch (error) {
                    console.error('Download failed:', error);
                    btn.innerHTML = `
                        <span class="flex items-center justify-center space-x-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                            <span>Failed</span>
                        </span>
                    `;
                    
                    setTimeout(() => {
                        btn.innerHTML = originalContent;
                        btn.disabled = false;
                    }, 2000);
                }
            }

            triggerDownload(title, url) {
                const link = document.createElement('a');
                link.href = url;
                link.download = `${title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_1080p.mp4`;
                link.style.display = 'none';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            async batchDownload() {
                const downloadButtons = document.querySelectorAll('.workspace-download-btn');
                const batchBtn = document.getElementById('batch-download');
                
                const originalContent = batchBtn.innerHTML;
                
                batchBtn.innerHTML = `
                    <span class="flex items-center space-x-2">
                        <svg class="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span>Preparing Downloads...</span>
                    </span>
                `;
                batchBtn.disabled = true;

                // Download each video with a delay
                for (let i = 0; i < downloadButtons.length; i++) {
                    const btn = downloadButtons[i];
                    const title = btn.dataset.title;
                    const url = btn.dataset.url;
                    
                    try {
                        this.triggerDownload(title, url);
                        await new Promise(resolve => setTimeout(resolve, 1000)); // 1 second delay between downloads
                    } catch (error) {
                        console.error(`Failed to download ${title}:`, error);
                    }
                }

                batchBtn.innerHTML = `
                    <span class="flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                        <span>All Downloaded!</span>
                    </span>
                `;

                setTimeout(() => {
                    batchBtn.innerHTML = originalContent;
                    batchBtn.disabled = false;
                }, 3000);
            }
        }

        // Initialize workspace functionality
        document.addEventListener('DOMContentLoaded', function() {
            const workspaceVideoManager = new WorkspaceVideoManager();
            const workspaceDownloadManager = new WorkspaceDownloadManager();
        });

        // Generation simulation
        let currentStep = 1;
        let progress = 15;
        
        const steps = [
            {
                title: "Researching Trending Topics",
                description: "Analyzing viral horror story trends and keywords...",
                icon: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
                content: "research-content"
            },
            {
                title: "Gathering Visual Content",
                description: "Collecting high-quality images and video clips...",
                icon: "M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",
                content: "content-gathering"
            },
            {
                title: "Assembling Videos",
                description: "Creating video sequences with AI-powered editing...",
                icon: "M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z",
                content: "assembly-phase"
            },
            {
                title: "Final Rendering",
                description: "Optimizing videos for YouTube Shorts format...",
                icon: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",
                content: "rendering-phase"
            }
        ];

        function updateStep(stepNumber) {
            // Update step indicators
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById(`step-${i}`);
                const lineEl = document.getElementById(`line-${i}`);
                
                if (i <= stepNumber) {
                    stepEl.querySelector('div').className = 'w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium';
                    stepEl.querySelector('span').className = 'text-sm font-medium text-primary';
                    if (lineEl) lineEl.className = 'w-8 h-0.5 bg-primary';
                } else {
                    stepEl.querySelector('div').className = 'w-8 h-8 bg-secondary-200 text-text-secondary rounded-full flex items-center justify-center text-sm font-medium';
                    stepEl.querySelector('span').className = 'text-sm text-text-secondary';
                    if (lineEl) lineEl.className = 'w-8 h-0.5 bg-secondary-200';
                }
            }

            // Update status
            const step = steps[stepNumber - 1];
            document.getElementById('status-title').textContent = step.title;
            document.getElementById('status-description').textContent = step.description;
            document.getElementById('status-icon').innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${step.icon}"/>`;

            // Show/hide content sections
            ['research-content', 'content-gathering', 'assembly-phase', 'rendering-phase'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(step.content).classList.remove('hidden');
        }

        function updateProgress(newProgress, timeRemaining) {
            progress = newProgress;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-percentage').textContent = progress + '%';
            document.getElementById('time-remaining').textContent = timeRemaining;
        }

        // Simulate generation process
        setTimeout(() => {
            updateStep(2);
            updateProgress(35, '2 min 5 sec');
        }, 3000);

        setTimeout(() => {
            updateStep(3);
            updateProgress(65, '1 min 20 sec');
        }, 6000);

        setTimeout(() => {
            updateStep(4);
            updateProgress(85, '30 sec');
        }, 9000);

        setTimeout(() => {
            updateProgress(100, '0 sec');
            
            // Hide generation content and show results
            document.querySelector('.card:nth-child(2)').style.display = 'none';
            document.getElementById('generated-videos').classList.remove('hidden');
            
            // Show celebration effect
            const celebration = document.createElement('div');
            celebration.innerHTML = '🎉';
            celebration.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-6xl animate-bounce z-50';
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 2000);
        }, 12000);

        // Individual download buttons
        document.querySelectorAll('.btn-secondary').forEach(btn => {
            if (btn.textContent.includes('Download')) {
                btn.addEventListener('click', function() {
                    const originalContent = this.innerHTML;
                    this.innerHTML = `
                        <span class="flex items-center justify-center space-x-1">
                            <svg class="animate-spin w-3 h-3" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span>Downloading...</span>
                        </span>
                    `;
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = originalContent;
                        this.disabled = false;
                    }, 2000);
                });
            }
        });
    </script>
</body>
</html>